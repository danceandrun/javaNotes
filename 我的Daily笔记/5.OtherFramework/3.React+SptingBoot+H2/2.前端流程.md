ä½ çš„ `sopra-fs24-template-client` é¡¹ç›®æ˜¯ä¸€ä¸ª **React å‰ç«¯åº”ç”¨**ï¼Œå®ƒé€šè¿‡ **Vite** è¿è¡Œï¼Œå¹¶ä¸ `sopra-fs24-template-server`ï¼ˆSpring Boot åç«¯ï¼‰è¿›è¡Œäº¤äº’ã€‚è®©æˆ‘è¯¦ç»†è®²è§£å®ƒçš„è¿è¡Œæµç¨‹ï¼ŒåŒ…æ‹¬è®¿é—® `localhost:3000` çœ‹åˆ°é¡µé¢çš„è¿‡ç¨‹ï¼Œä»¥åŠ**ç™»å½•æ—¶å‘ç”Ÿçš„å…·ä½“æ­¥éª¤**ã€‚

------

# **ğŸš€ 1. è¿è¡Œ `localhost:3000` æ—¶å‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿ**

å½“ä½ åœ¨ç»ˆç«¯è¿è¡Œï¼š

```sh
npm install  # å®‰è£…ä¾èµ–ï¼ˆé¦–æ¬¡è¿è¡Œéœ€è¦ï¼‰
npm run dev  # å¯åŠ¨ Vite æœåŠ¡å™¨
```

Vite ä¼šå¯åŠ¨ä¸€ä¸ªæœ¬åœ°å¼€å‘æœåŠ¡å™¨ï¼Œé»˜è®¤ç›‘å¬ **ç«¯å£ 3000**ï¼ˆå¦‚æœ `vite.config.js` ä¸­æ²¡æœ‰è‡ªå®šä¹‰ç«¯å£ï¼‰ã€‚

### **âš¡ å…·ä½“æµç¨‹**

1. **Vite å¯åŠ¨å¼€å‘æœåŠ¡å™¨**ï¼ˆç›‘å¬ `localhost:3000`ï¼‰ã€‚

2. **æµè§ˆå™¨è¯·æ±‚ `http://localhost:3000/`**ï¼š

   - æµè§ˆå™¨å‘ Vite æœåŠ¡å™¨è¯·æ±‚ `index.html`ï¼Œè¿™ä¸ª HTML æ–‡ä»¶ä½äº `public/index.html`ï¼ˆæˆ–è€… `dist/index.html`ï¼Œä½† `dist/` åªåœ¨æ‰“åŒ…åæ‰ä¼šå‡ºç°ï¼‰ã€‚

3. **Vite åŠ è½½ `index.html`ï¼Œå¹¶å¯åŠ¨ React**ï¼š

   - ```
     index.html
     ```

      é‡Œä¼šæœ‰ä¸€è¡Œï¼š

     ```html
     <script type="module" src="/src/main.jsx"></script>
     ```

   - è¿™ä¼šåŠ è½½ 

     ```
     src/main.jsx
     ```

     ï¼š

     ```javascript
     import React from "react";
     import ReactDOM from "react-dom/client";
     import App from "./App";
     import { BrowserRouter } from "react-router-dom";
     import { AuthProvider } from "./context/AuthContext";
     
     ReactDOM.createRoot(document.getElementById("root")).render(
         <React.StrictMode>
             <AuthProvider>
                 <BrowserRouter>
                     <App />
                 </BrowserRouter>
             </AuthProvider>
         </React.StrictMode>
     );
     ```

   - è¿™ä¼šæ‰§è¡Œï¼š

     - `AuthProvider`ï¼šç®¡ç†ç”¨æˆ·ç™»å½•çŠ¶æ€
     - `BrowserRouter`ï¼šè®© React å¤„ç†å‰ç«¯è·¯ç”±ï¼ˆ`/register`, `/login`, `/users`ï¼‰
     - `App` ç»„ä»¶ï¼šåŠ è½½åº”ç”¨çš„ UI

4. **React æ¸²æŸ“ UI**ï¼š

   - ```
     App.js
     ```

      ä¼šå†³å®šè¦æ˜¾ç¤ºå“ªä¸ªé¡µé¢ï¼š

     ```javascript
     import { Routes, Route } from "react-router-dom";
     import Register from "./pages/Register";
     import Login from "./pages/Login";
     import Users from "./pages/Users";
     import Navigation from "./components/Navigation";
     
     function App() {
         return (
             <div>
                 <Navigation />
                 <Routes>
                     <Route path="/" element={<h1>æ¬¢è¿æ¥åˆ°ä¸»é¡µ</h1>} />
                     <Route path="/register" element={<Register />} />
                     <Route path="/login" element={<Login />} />
                     <Route path="/users" element={<Users />} />
                 </Routes>
             </div>
         );
     }
     
     export default App;
     ```

   - è¿™é‡Œçš„ 

     ```
     Routes
     ```

      ç»„ä»¶ä¼šåŒ¹é… URLï¼š

     - `/` â†’ æ˜¾ç¤ºä¸»é¡µ
     - `/register` â†’ æ˜¾ç¤º `Register.js`
     - `/login` â†’ æ˜¾ç¤º `Login.js`
     - `/users` â†’ æ˜¾ç¤º `Users.js`ï¼ˆå—ä¿æŠ¤ï¼Œéœ€è¦ç™»å½•ï¼‰

------

# **ğŸ” 2. å½“ç”¨æˆ·ç™»å½•æ—¶ï¼Œå‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿ**

å‡è®¾ä½ åœ¨ `http://localhost:3000/login` é¡µé¢è¾“å…¥ï¼š

```
ç”¨æˆ·å: alice
å¯†ç : 123456
```

ç„¶åç‚¹å‡»â€œç™»å½•â€ï¼ŒReact å¤„ç†çš„æµç¨‹å¦‚ä¸‹ï¼š

## **1ï¸âƒ£ `Login.js` å‘é€ API è¯·æ±‚**

`Login.js` ç»„ä»¶ä¼šè°ƒç”¨ `loginUser()`ï¼š

```javascript
const handleLogin = async (event) => {
    event.preventDefault();
    setError("");

    try {
        const userData = await loginUser(username, password);
        login(userData);  // å­˜å‚¨ç™»å½•çŠ¶æ€
        navigate("/users");  // è·³è½¬åˆ°ç”¨æˆ·é¡µé¢
    } catch (err) {
        setError(err.message);
    }
};
```

å®ƒè°ƒç”¨ `helpers/api.js` ä¸­çš„ `loginUser()` æ–¹æ³•ï¼š

```javascript
export const loginUser = async (username, password) => {
    return request("/users/login", "POST", { username, password });
};
```

è¿™ä¸ª `request()` æ–¹æ³•ä¼šå‘ **åç«¯** å‘é€ HTTP è¯·æ±‚ï¼š

```
POST http://localhost:8080/users/login
Content-Type: application/json
Body: { "username": "alice", "password": "123456" }
```

------

## **2ï¸âƒ£ Spring Boot æœåŠ¡å™¨éªŒè¯ç™»å½•**

ä½ çš„ `sopra-fs24-template-server`ï¼ˆåç«¯ï¼‰ä¼šåœ¨ `UserController.java` é‡Œå¤„ç†è¿™ä¸ªè¯·æ±‚ï¼š

```java
@PostMapping("/login")
public ResponseEntity<User> loginUser(@RequestBody UserLoginDTO loginDTO) {
    User user = userService.authenticate(loginDTO.getUsername(), loginDTO.getPassword());
    if (user == null) {
        return ResponseEntity.status(HttpStatus.UNAUTHORIZED).body(null);
    }
    return ResponseEntity.ok(user);
}
```

å¦‚æœç”¨æˆ·åå’Œå¯†ç æ­£ç¡®ï¼Œåç«¯ä¼šè¿”å›ï¼š

```json
{
    "id": 1,
    "username": "alice",
    "token": "abcdef123456"
}
```

å¦åˆ™è¿”å› **401 Unauthorized** é”™è¯¯ã€‚

------

## **3ï¸âƒ£ React å­˜å‚¨ç™»å½•çŠ¶æ€**

`Login.js` ç»„ä»¶æ‹¿åˆ° `userData` åï¼Œä¼šè°ƒç”¨ï¼š

```javascript
login(userData);  // å­˜å‚¨ç™»å½•çŠ¶æ€
```

è€Œ `login()` æ–¹æ³•åœ¨ `AuthContext.js` é‡Œï¼š

```javascript
const login = (userData) => {
    setUser(userData);
    localStorage.setItem("user", JSON.stringify(userData));
};
```

å®ƒåšäº†ä¸¤ä»¶äº‹ï¼š

1. **æ›´æ–° `AuthContext`**ï¼Œè®© `Navigation.js` çŸ¥é“ç”¨æˆ·å·²ç™»å½•ã€‚
2. **å°†ç”¨æˆ·ä¿¡æ¯å­˜å…¥ `localStorage`**ï¼Œå³ä½¿åˆ·æ–°é¡µé¢ï¼Œç”¨æˆ·ä»ç„¶ä¿æŒç™»å½•çŠ¶æ€ã€‚

------

## **4ï¸âƒ£ è·³è½¬åˆ° `/users`**

```javascript
navigate("/users");  // è·³è½¬åˆ°ç”¨æˆ·é¡µé¢
```

æ­¤æ—¶ï¼ŒReact ä¼šé‡æ–°æ¸²æŸ“ UIï¼Œæ˜¾ç¤º `Users.js` é¡µé¢ã€‚

------

# **ğŸ›‘ 3. ä»€ä¹ˆæ—¶å€™ç”¨æˆ·ä¼šè¢«ç™»å‡ºï¼Ÿ**

- **æ‰‹åŠ¨ç‚¹å‡»â€œç™»å‡ºâ€**ï¼š

  - ```
    Navigation.js
    ```

     é‡Œæœ‰ï¼š

    ```javascript
    <button onClick={handleLogout}>ç™»å‡º</button>
    ```

  - å®ƒä¼šè°ƒç”¨ï¼š

    ```javascript
    const handleLogout = async () => {
        await logoutUser();  // é€šçŸ¥åç«¯
        logout();  // æ¸…é™¤å‰ç«¯çŠ¶æ€
    };
    ```

  - ```
    logout()
    ```

     åœ¨ 

    ```
    AuthContext.js
    ```

    ï¼š

    ```javascript
    const logout = () => {
        setUser(null);
        localStorage.removeItem("user");
    };
    ```

- **æµè§ˆå™¨æ¸…é™¤ `localStorage`**ï¼š

  - å¦‚æœä½ æ‰“å¼€å¼€å‘è€…å·¥å…· (`F12` â†’ `Application` â†’ `Local Storage` â†’ `http://localhost:3000`)ï¼Œåˆ é™¤ `user`ï¼Œåˆ·æ–°é¡µé¢ï¼Œå°±ä¼šè‡ªåŠ¨ç™»å‡ºã€‚

------

# **ğŸ¯ æ€»ç»“**

âœ… **è®¿é—® `localhost:3000` æ—¶ï¼š**

- Vite å¯åŠ¨å¼€å‘æœåŠ¡å™¨
- åŠ è½½ `index.html` â†’ `main.jsx` â†’ `App.js`
- React å¤„ç†å‰ç«¯è·¯ç”±

âœ… **ç”¨æˆ·ç™»å½•æ—¶ï¼š**

- `Login.js` å‘é€ `POST /users/login`
- Spring Boot åç«¯éªŒè¯è´¦å·ï¼Œè¿”å›ç”¨æˆ·ä¿¡æ¯
- React å­˜å‚¨ç™»å½•çŠ¶æ€ï¼ˆ`AuthContext` + `localStorage`ï¼‰
- è·³è½¬åˆ° `/users` é¡µé¢

âœ… **ç”¨æˆ·ç™»å‡ºæ—¶ï¼š**

- è§¦å‘ `logout()`ï¼Œæ¸…é™¤ `AuthContext` å’Œ `localStorage`
- é‡æ–°æ¸²æŸ“ UIï¼Œæ˜¾ç¤ºâ€œæœªç™»å½•â€çŠ¶æ€

------

è¿™ä¸ªæµç¨‹ç¬¦åˆä½ çš„ `sopra-fs24-template-client` å’Œ `sopra-fs24-template-server` é¡¹ç›®ã€‚
 å¦‚æœæœ‰ä¸æ¸…æ¥šçš„åœ°æ–¹ï¼Œæ¬¢è¿æé—®ï¼ğŸš€